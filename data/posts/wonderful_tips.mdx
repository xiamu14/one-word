---
title: 开发小技巧
date: 2022-4-24
recently: true
---

### 在 MAC M1 上安装 node-sass

这是一件有点麻烦的事，需要按照下面的步骤和操作。

<Step number={1} title="检查 node 版本">
在 yarn.lock 或 npm.lock 中检查 node-sass
的版本，参考下面的表格确定对应的 node 版本。保持 node 版本和 node-sass 对应一致。

<Image
  alt={`node-sass version excel`}
  src={`/images/wonderful_tips/node-sass.png`}
  width={1190}
  height={662}
/>

> 建议使用 volta 来管理 node 版本，并在代码中固定 node 版本。

</Step>

<Step number={2} title="使用 Rosetta 模式运行 Command Line">
  在 Rosetta 模式下运行命令行工具，设置方式如下图。
  <Image
    alt={`rosetta setting`}
    src={`/images/wonderful_tips/rosetta.jpeg`}
    width={539}
    height={649}
  />
</Step>

<Step number={3} title="确保 python 已安装" >
node-sass 构建时用到 python，所以要确保 python 已安装。

> 如果遇到 "python2 : command not found" 。那大概是因为 Mac 在最新的 Monterey 12.3 > 版本里去掉了系统的 python2，所以需要重新安装 python2 版本。  
> 首先尝试通过 pyenv 安装。如果安装以后，构建 node—sass 时提示“无法找 python2”，这可能是 Mac Monterey 12.3 版本做的调整，pyenv 还没更新支持。  
>  最后的选择则是从官网下载特定的安装包。

</Step>

### 小程序框架 Taro 丢失组件样式

- 复现步骤：在 src 目录下，如果没有 app.scss，且一个组件被多个页面使用，那么该组件的样式会丢失。
- 解决方案：把 app.scss 加回来，即使是空文件也可以修复此问题。
